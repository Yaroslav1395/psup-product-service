= PSUP Product Service
Ярослав Сахно
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 2
:sectnums:

PSUP Product Service — это компонент в микросервисной архитектуре универсальной платформы дистрибуции товаров.
Сервис отвечает за каталогизацию продукции и управление её основными характеристиками.


== Работа с сущностью "Категория"

Сущность `Категория` используется для группировки товаров по типу. Каждая категория имеет уникальное имя и может содержать вложенные подкатегории.

=== Архитектура

* `CategoryController` — REST-контроллер, предоставляющий CRUD-интерфейс для категорий.
* `CategoryService` — слой бизнес-логики.
* `CategoryRepository` — реактивный репозиторий для доступа к данным.
* `CategoryControllerTest` — модульные тесты и генерация документации с помощью Spring REST Docs.

=== Получение категории по идентификатору

Операция возвращает категорию по её `ID`.

==== CURL-запрос
include::{snippets}/get-category-by-id/curl-request.adoc[]

==== HTTP-запрос
include::{snippets}/get-category-by-id/httpie-request.adoc[]

==== Параметры пути
include::{snippets}/get-category-by-id/path-parameters.adoc[]

==== HTTP-ответ
include::{snippets}/get-category-by-id/http-response.adoc[]

==== Тело ответа
include::{snippets}/get-category-by-id/response-body.adoc[]

==== Описание полей
include::{snippets}/get-category-by-id/response-fields.adoc[]

==== Ошибки

При вызове этого метода возможны следующие ошибки:

[cols="1,2,2", options="header"]
|===
| Код   | Сообщение              | Описание
| 404   | `Категория не найдена` | Указанная категория не существует
| 400   | `Ошибка валидации`     | Передан некорректный параметр
|===

Пример ответа при ошибке:

include::{snippets}/get-category-by-id-empty/http-response.adoc[]

Описание полей при ошибке

include::{snippets}/get-category-by-id-empty/response-fields.adoc[]

=== Получение всех категорий
Операция возвращает все существующие категории

==== CURL-запрос
include::{snippets}/get-all-categories/curl-request.adoc[]

==== HTTP-запрос
include::{snippets}/get-all-categories/httpie-request.adoc[]

==== HTTP-ответ
include::{snippets}/get-all-categories/http-response.adoc[]

==== Тело ответа
include::{snippets}/get-all-categories/response-body.adoc[]

==== Описание полей
include::{snippets}/get-all-categories/response-fields.adoc[]

==== Ошибки

При вызове этого метода возможны следующие ошибки:

[cols="1,2,2", options="header"]
|===
| Код   | Сообщение              | Описание
| 404   | `Категории не найдены` | В базе нет ни одной категории
|===

Пример ответа при ошибке:

include::{snippets}/get-all-categories-empty/http-response.adoc[]

Описание полей при ошибке

include::{snippets}/get-all-categories-empty/response-fields.adoc[]


=== Сохранение категории
Операция сохраняет новую категорию

==== CURL-запрос
include::{snippets}/save-category/curl-request.adoc[]

==== HTTP-запрос
include::{snippets}/save-category/http-request.adoc[]

==== Свойства запроса
include::{snippets}/save-category/request-fields.adoc[]

==== HTTP-ответ
include::{snippets}/save-category/http-response.adoc[]

==== Тело ответа
include::{snippets}/save-category/response-body.adoc[]

==== Описание полей
include::{snippets}/save-category/response-fields.adoc[]

==== Ошибки

При вызове этого метода возможны следующие ошибки:

[cols="1,2,2", options="header"]
|===
| Код   | Сообщение              | Описание
| 409   | `Дубликат категории`   | В базе уже существует такая категория
| 400   | `Ошибка валидации`     | Передан некорректный объект
|===

Пример ответа при ошибке

Дубликат:
include::{snippets}/save-category-duplicate/http-response.adoc[]

Ошибка валидации:
include::{snippets}/save-category-validation-error/http-response.adoc[]

Описание полей при ошибке

include::{snippets}/save-category-duplicate/response-fields.adoc[]



== Примечания

- Все взаимодействия производятся в реактивной парадигме с использованием WebFlux.
- Документация создается автоматически на основании интеграционных тестов.